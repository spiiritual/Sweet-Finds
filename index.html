<!DOCTYPE html>
<html>
    <head>
        <meta charset = "utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Sweet Finds</title>
        <link rel="stylesheet" href="css/style.css">
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
        <script src="script.js" defer></script>
    </head>
<body>
    <div class="wrapper">
        <form action="" id="product-url-form">
            <h1>Sweet Finds</h1>
            <div class="input-box">
                <input type ="text" placeholder="Paste your Amazon link here" required >
                <i class='bx bx-search-alt'></i>
            </div>
        </form>
    <div class="product-feedback">
        <form action="" id="feedback-form">
            <h2>Feedback</h2>
            <div class="input-box">
                <input type ="text" placeholder="Provide feedback here" required>
            </div>
        </form>
    </div>

        <!-- along with the "paste link" bar, underneath will show the "how to use" with animation -->
        <div class="how-to-use-text">
            <h1>How to Use</h1>
            Follow these simple steps to find your sweet finds:
            <ul>
                <p>1. Paste a link to a product you are searching for</p>
                <p>2. Provide what you like and dislike about the product</p>
                <p>3. Sweet Finds will give you the product with the best reviews and highest ratings</p>
                <p>4. Sweet Finds will also give you recommendations based on the product you are searching for</li>
                <p>5. Enjoy discovering our recommendations!</li>
            </ul>
        </div>
    </div>

    <script>
        // redirects user to loading screen and then products page
        window.addEventListener("load", () => {
            const loader = document.querySelector(".loader")
            
            loader.classList.add("loader-hidden");

            loader.addEventListener("transitionend", () => {
                document.body.removeChild("loader");
            })
        })

        document.getElementById("product-url-form").addEventListener("submit", processSubmission);
        document.getElementById("feedback-form").addEventListener("submit", processSubmission);

        function processSubmission(evt) {
            evt.preventDefault();
            
            const link = document.querySelector("#product-url-form > div > input[type=text]").value;
            const feedback = document.querySelector("#feedback-form > div > input[type=text]").value;

            if (link && feedback) {
                const encodedLink = encodeURIComponent(link);
                const encodedFeedback = encodeURIComponent(feedback);
                window.location.href = "http://127.0.0.1:5500/page%202.html" + "?product_url=" + encodedLink + "&feedback=" + encodedFeedback;
            }
        }
    </script>
    
</body>
</html>